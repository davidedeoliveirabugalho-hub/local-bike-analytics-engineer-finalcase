version: 2

models:
  - name: stg_production__brands
    description: "This model contains informations about brands of products"
    columns:
      - name: brand_id
        description: "Primary key, unique identifier for each brand"
        tests:
            - unique
            - not_null

  - name: stg_production__categories
    description: "This model contains informations about categories of products"
    columns:
      - name: category_id
        description: "Primary key, unique identifier for each category"
        tests:
            - unique
            - not_null

  - name: stg_production__products
    description: "This model contains information about each product, including its price, brand, and category."
    columns:
      - name: product_id
        description: "Primary key, unique identifier for each product."
        tests:
            - unique
            - not_null
      - name: product_brand_id
        description: "Foreign key linking the product to the corresponding brand."
        tests:
          - relationships:
              arguments:
                to: ref('stg_production__brands')
                field: brand_id
      - name: product_category_id
        description: "Foreign key linking the product to the corresponding category."
        tests:
          - relationships:
              arguments:
                to: ref('stg_production__categories')
                field: category_id

  - name: stg_production__stocks
    description: "This model contains information about each product stocks for each store."
    columns:
      - name: product_store_id
        description: "Primary key, unique identifier for each product in each store: generated by concatenating store_id and product_id."
        tests:
            - unique
            - not_null
      - name: store_id
        description: "Foreign key linking the product store stock to the corresponding store."
        tests:
          - relationships:
              arguments:
                to: ref('stg_sales__stores')
                field: store_id
      - name: product_id
        description: "Foreign key linking the product store stock to the corresponding product."
        tests:
          - relationships:
              arguments:
                to: ref('stg_production__products')
                field: product_id